mutation CreateUser($displayName: String!, $email: String, $photoUrl: String) @auth(level: USER) {
  user_insert(data: {displayName: $displayName, email: $email, photoUrl: $photoUrl, createdAt_expr: "request.time", id_expr: "uuidV4()"})
}

query GetCurrentUserMedications @auth(level: USER) {
  medications(where: {userId: {eq_expr: "auth.uid"}}) {
    id
    name
    dosage
    frequency
    instructions
    notes
    refillReminderDays
  }
}

mutation CreateMedication($name: String!, $dosage: String!, $frequency: String!, $instructions: String, $notes: String, $refillReminderDays: Int) @auth(level: USER) {
  medication_insert(data: {name: $name, dosage: $dosage, frequency: $frequency, instructions: $instructions, notes: $notes, refillReminderDays: $refillReminderDays, userId_expr: "auth.uid", id_expr: "uuidV4()"})
}

mutation RecordDose($medicationId: UUID!, $notes: String, $status: String!) @auth(level: USER) {
  doseRecord_insert(data: {medicationId: $medicationId, notes: $notes, recordedAt_expr: "request.time", status: $status, userId_expr: "auth.uid", id_expr: "uuidV4()"})
}